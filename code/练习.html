<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <script>
      /*
      function pick(object) {
        let result = Object.create(null)
        console.log(arguments)
        for (let i = 1; i < arguments.length; i++) {
          result[arguments[i]] = object[arguments[i]]
        }
        return result
      }
      let book = {
        title: 'aa',
        author: 'bb',
        year: 2016
      }
      let bookData = pick(book, 'author', 'year')
      console.log(bookData.author)
      console.log(bookData.year)

      function Person(name) {
        this.name = name
      }
      */

      /*
      var person = new Person('a')
      var notAPerson = Person('b')

      console.log(person)
      console.log(notAPerson)
      */

      /*
      let lastName = "last name"
      let person = {
        "first name": "aa",
        [lastName]: "bb"
      }
      console.log(person)
      console.log(person[lastName])
      */

      /*
      let person = {
        getGreeting() {
          return "hello"
        }
      }
      let dog = {
        getGreeting() {
          return "Wolf"
        }
      }

      let friend = {
        getGreeting() {
          // return this === friend
          return super.getGreeting
          // return Object.getPrototypeOf(this).getGreeting()

        }
      }

      Object.setPrototypeOf(friend, person)
      // console.log(person.getGreeting())
      console.log(friend.getGreeting())
      */

      /*
      let node = {
          type: "aa",
          name: "bb"
        },
        type = "cc",
        name = 5

      function outputINfo(value) {
        console.log(value)
        console.log(arguments[0])
        console.log(value === node)
      }

      outputINfo({
        type,
        name
      } = node)
      // console.log(type)
      // console.log(name)
      */

      /*
      let node = {
        type: "aa",
        name: "meng",
        loc: {
          start: {
            line: 1,
            column: 4
          },
          end: {
            line: 1,
            column: 4
          }
        }
      }

      let {
        loc: {
          start
        }
      } = node
      console.log(start)
      */

      /*
      function setCookie(name, value, options) {
        options = options || {}
        console.log(options)
        let secure = options.secure,
          path = options.path,
          domain = options.domain,
          expires = options.expires

      }
      setCookie('type', 'js', {
        secure: true,
        expires: 60000
      })
      */

      // var MyCalendar = function () {
      //   this.booked = []
      // }

      // MyCalendar.prototype.book = function (start, end) {
      //   for (const arr of this.booked) {
      //     let l = arr[0],
      //       r = arr[1]
      //     if (l < end && r > start) {
      //       return false
      //     }
      //   }
      //   this.booked.push([start, end])
      //   return true
      // }
      // console.log(MyCalendar.prototype.book[10, 20])

      /*
      var twoSum = function (nums, target) {
        for (var i = 0; i < nums.length - 1; i++) {
          for (var j = i + 1; j < nums.length ; j++) {
            if (nums[i] + nums[j] === target) {
              return new Array([i, j])[0]
            }
          }
        }
      }

      console.log(twoSum([2, 7, 11, 15], 9))
      */

      /*
      let colors = ["red", "green", "blue"]
      let [firstColor, ...secondColor] = colors
      console.log(secondColor)
      */

      /*
      let uid = Symbol.for("uid")
      let object = {
        [uid]: "123456"
      }
      let symbols = Object.getOwnPropertySymbols(object)
      console.log(symbols[0])
      */

      /*
      function MyObject() {

      }

      Object.defineProperty(MyObject, Symbol.hasInstance, {
        value: function (v) {
          return false
        }
      })

      let obj = new MyObject()
      console.log(MyObject[Symbol.hasInstance])
      console.log(obj)
      console.log(obj instanceof MyObject)
      */

      /*
      let set = new Set([1, 2])
      let processor = {
        output(value) {
          console.log(value)
        },
        // 箭头函数
        // process(dataSet) {
        //   dataSet.forEach(value => {
        //     this.output(value)
        //   });
        // }
        process(dataSet) {
          dataSet.forEach(function (value) {
            this.output(value)
          }, this);
        }
      }

      processor.process(set)
      */

      /*
      function* createIterator(items) {
        yield 1
        yield 2
        yield 3
      }

      let iterator = createIterator()
      console.log(iterator.next().value) //1
      console.log(iterator.next().value) //2
      console.log(iterator.next().value) //3
      console.log(iterator.next().value) //undefined

      function* createIterators(items) {
        for (let i = 0; i < items.length; i++) {
          yield items[i]
        }
      }

      let iterators = createIterators([1, 2, 3, 4, 5, 6])
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      console.log(iterators.next())
      */

      /*
      let values = [1, 2, 3]
      let iterator = values[Symbol.iterator]()
      console.log(iterator.next())
      */

      /*
      let data = new Map()
      data.set('name', "meng")
      data.set("title", "ES6")

      for (let [key, value] of data) {
        console.log(key, value)
      }
      */

      /*
      let hasLengthOf10 = {
        [Symbol.match]: function (value) {
          return value.length === 10 ? [value] : null
        },
        [Symbol.replace]: function (value, replacement) {
          console.log(value, replacement)
          return value.length === 10 ? replacement : value
        },
        [Symbol.search]: function (value) {
          return value.length === 10 ? 0 : -1
        },
        [Symbol.split]: function (value) {
          return value.length === 10 ? [, ] : [value]
        }
      }

      let message1 = "Hello world"
      let message2 = "Hello John"

      let match1 = message1.match(hasLengthOf10)
      let match2 = message2.match(hasLengthOf10)

      console.log(match1)
      console.log(match2)

      let replace1 = message1.replace(hasLengthOf10)
      let replace2 = message2.replace(hasLengthOf10)

      console.log(replace1)
      console.log(replace2)
      */

      /*
        function* createIterator() {
          yield 1
          yield 2
          yield 3
        }

        let iterator = createIterator()
        console.log(iterator.next())
        console.log(iterator.next())
        console.log(iterator.next())
        console.log(iterator.next())
        */

      /*
        let numbers = [1,2,3,4]
        numbers.fill(0,1,3)
        console.log(numbers)
        */

      /*
        let numbers = {
          *[Symbol.iterator]() {
            yield 1
            yield 2
            yield 3
          }
        }

        let numbers2 = Array.from(numbers, (value) => value + 1)
        console.log(numbers2.toString())
        */

      /*
        let targrt = {
          name:'target',
          value:42
        }

        let proxy = new Proxy(targrt,{
          has(trapTarget,key){
            if(key === 'value'){
              return false
            } else{
              return Reflect.has(trapTarget,key)
            }
          }
        })

        console.log('value' in proxy)
        console.log('name' in proxy)
        console.log('toString' in proxy)
        */

      /*
        let proxy = new Proxy(
          {},
          {
            defineProperty(trapTarget, key, descriptor) {
              return Reflect.defineProperty(trapTarget, key, descriptor)
            },
            getOwnPropertyDescriptor(trapTarget, key) {
              return Reflect.getOwnPropertyDescriptor(trapTarget, key)
            }
          }
        )

        Object.defineProperty(proxy, 'name', {
          value: 'proxy'
        })

        console.log(proxy.name)

        let descriptor = Object.getOwnPropertyDescriptor(proxy, 'name')
        console.log(descriptor.value)
        */

      /*
      let a = 6
      let b = 9
      function simpleTag(strings, ...expressions) {
        console.log(strings)
        console.log(strings[0])
        for (const expression of expressions) {
          console.log(expression)
        }
      }

      // let taggedResult = simpleTag`${a} + ${b} = ${a + b}`

      function zipTag(strings, ...expressions) {
        console.log(strings)
        console.log(expressions.map((e, i) => `${e}${strings[i + 1]}`).join(''))
      }
      let taggedResult = zipTag`${a} + ${b} = ${a + b}`
      */

      // 异步迭代器
      class Emitter {
        constructor(max) {
          this.max = max
          this.syncIdx = 0 // 同步
          this.asyncIdx = 0 // 异步
        }

        // 异步迭代器
        async *[Symbol.asyncIterator]() {
          while (this.asyncIdx < this.max) {
            yield this.asyncIdx++
          }
        }

        // 同步迭代器
        *[Symbol.iterator]() {
          while (this.syncIdx < this.max) {
            yield this.syncIdx++
          }
        }
      }

      const emitter = new Emitter(5)
      // 异步
      // async function asyncCount() {
      //   const asyncCounter = emitter[Symbol.asyncIterator]()
      //   for await (const x of asyncCounter) {
      //     console.log(x)
      //   }
      // }
      // asyncCount()
      const asyncCounter = emitter[Symbol.asyncIterator]()
      console.log(asyncCounter.next())
      // 同步
      async function syncCount() {
        const syncCounter = emitter[Symbol.iterator]()
        for (const x of syncCounter) {
          console.log(x)
        }
      }
      syncCount()
    </script>
  </body>
</html>
